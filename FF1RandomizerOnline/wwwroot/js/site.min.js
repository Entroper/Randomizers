function validateSeed(){var n=document.getElementById("Seed");n.value.match(/^[A-Fa-f0-9]{8}$/)?n.parentElement.classList.remove("has-error"):n.parentElement.classList.add("has-error")}function validateFlags(){var n=document.getElementById("Flags"),t=n.value.split("-"),i=t.length==2&&!!t[0].match(/^[A-Za-z0-9!%\.]/)&&!!t[1].match(/[A-Za-z0-9!%]{5}$/);return i?n.parentElement.classList.remove("has-error"):n.parentElement.classList.add("has-error"),i}function newSeed(){var t=Math.floor(4294967296*Math.random()),n=t.toString(16).toUpperCase();n.length<8&&(n=Array(9-n.length).join("0")+n);document.getElementById("Seed").value=n}function setCallbacks(){for(var r,n,u,f,i,t=0;t<checkboxIds.length;t++)r=document.getElementById(checkboxIds[t]),r.onchange=setFlagsString;document.getElementById("Flags_TeamSteak").onchange=setFlagsString;document.getElementById("Flags_Music").onchange=setFlagsString;setPercentageCallback("Flags_PriceScaleFactor","prices-display");setPercentageCallback("Flags_EnemyScaleFactor","enemy-stats-display");n=document.getElementById("Flags_ExpMultiplier");n.onchange=expGoldBoostCallback;n=document.getElementById("Flags_ExpBonus");n.onchange=expGoldBoostCallback;n=document.getElementById("Flags_ForcedPartyMembers");n.onchange=forcedPartyMembersCallback;u=document.getElementById("Seed");u.oninput=validateSeed;f=document.getElementById("Flags");f.oninput=function(){validateFlags()&&(setFlags(),getPercentageCallback(document.getElementById("Flags_PriceScaleFactor"),"prices-display")(),getPercentageCallback(document.getElementById("Flags_EnemyScaleFactor"),"enemy-stats-display")(),expGoldBoostCallback(),forcedPartyMembersCallback())};i=document.getElementById("File");i.onchange=function(){var t=document.getElementById("file-label"),n=i.files[0];n&&(t.innerHTML=n.name)}}function setPercentageCallback(n,t){var i=document.getElementById(n);i.onchange=getPercentageCallback(i,t)}function getPercentageCallback(n,t){return function(){var i=document.getElementById(t);i.innerHTML=Math.round(100/n.value)+"% - "+Math.round(n.value*100)+"%";setFlagsString()}}function expGoldBoostCallback(){var n=document.getElementById("Flags_ExpMultiplier"),t=document.getElementById("Flags_ExpBonus"),i=document.getElementById("exp-gold-display");i.innerHTML=n.value+"x + "+t.value;setFlagsString()}function forcedPartyMembersCallback(){var n=document.getElementById("Flags_ForcedPartyMembers"),t=document.getElementById("forced-party-members-display");t.innerHTML=n.value;setFlagsString()}function getFlagsString(){for(var o,r,f,e,u,i,n=[],t=0;t<checkboxIds.length;t++)o=document.getElementById(checkboxIds[t]),n.push(!!o.checked);for(r=document.getElementById("Flags_TeamSteak"),n.push(r.value==="True"),r=document.getElementById("Flags_Music"),r.value==="None"?(n.push(!1),n.push(!1)):r.value==="Standard"?(n.push(!0),n.push(!1)):r.value==="Nonsensical"?(n.push(!1),n.push(!0)):r.value==="MusicDisabled"&&(n.push(!0),n.push(!0)),f=new Uint8Array(Math.ceil((n.length+0)/8)),t=0;t<f.length;++t)f[t]=(n[t*8+0]?1:0)<<0|(n[t*8+1]?1:0)<<1|(n[t*8+2]?1:0)<<2|(n[t*8+3]?1:0)<<3|(n[t*8+4]?1:0)<<4|(n[t*8+5]?1:0)<<5|(n[t*8+6]?1:0)<<6|(n[t*8+7]?1:0)<<7;return e=btoa(String.fromCharCode.apply(null,f)),e=e.replace(/\+/g,"!").replace(/\//g,"%").replace(/=/g,"."),u="",i=document.getElementById("Flags_PriceScaleFactor"),u+=base64Chars[i.value*10],i=document.getElementById("Flags_EnemyScaleFactor"),u+=base64Chars[i.value*10],i=document.getElementById("Flags_ExpMultiplier"),u+=base64Chars[i.value*10],i=document.getElementById("Flags_ExpBonus"),u+=base64Chars[i.value/10],i=document.getElementById("Flags_ForcedPartyMembers"),u+=base64Chars[i.value],e+"-"+u}function setFlagsString(){var n=document.getElementById("Flags");n.value=getFlagsString();n.parentElement.classList.remove("has-error")}function setFlags(){for(var h=document.getElementById("Flags"),c=h.value.split("-"),s=atob(c[0].replace(/%/g,"/").replace(/!/g,"+").replace(/\./g,"=")),r=new Uint8Array(new ArrayBuffer(s.length)),t=[],l,f,e,o,u,i,n=0;n<s.length;n++)r[n]=s.charCodeAt(n),t.push(!!(r[n]>>0&1)),t.push(!!(r[n]>>1&1)),t.push(!!(r[n]>>2&1)),t.push(!!(r[n]>>3&1)),t.push(!!(r[n]>>4&1)),t.push(!!(r[n]>>5&1)),t.push(!!(r[n]>>6&1)),t.push(!!(r[n]>>7&1));for(n=0;n<checkboxIds.length;n++)l=document.getElementById(checkboxIds[n]),l.checked=t[n];f=document.getElementById("Flags_TeamSteak");f.value=t[checkboxIds.length]?"True":"False";f=document.getElementById("Flags_Music");e=t[checkboxIds.length+1];o=t[checkboxIds.length+2];f.value=e&&!o?"Standard":!e&&o?"Nonsensical":e&&o?"MusicDisabled":"None";u=c[1];i=document.getElementById("Flags_PriceScaleFactor");i.value=base64Chars.indexOf(u[0])/10;i=document.getElementById("Flags_EnemyScaleFactor");i.value=base64Chars.indexOf(u[1])/10;i=document.getElementById("Flags_ExpMultiplier");i.value=base64Chars.indexOf(u[2])/10;i=document.getElementById("Flags_ExpBonus");i.value=base64Chars.indexOf(u[3])*10;i=document.getElementById("Flags_ForcedPartyMembers");i.value=base64Chars.indexOf(u[4]);h.value=getFlagsString()}var checkboxIds=["Flags_Treasures","Flags_IncentivizeIceCave","Flags_IncentivizeOrdeals","Flags_Shops","Flags_MagicShops","Flags_MagicLevels","Flags_MagicPermissions","Flags_Rng","Flags_EnemyScripts","Flags_EnemySkillsSpells","Flags_EnemyStatusAttacks","Flags_Ordeals","Flags_EarlyRod","Flags_EarlyCanoe","Flags_EarlyOrdeals","Flags_EarlyBridge","Flags_NoPartyShuffle","Flags_SpeedHacks","Flags_IdentifyTreasures","Flags_Dash","Flags_BuyTen","Flags_HouseMPRestoration","Flags_WeaponStats","Flags_ChanceToRun","Flags_SpellBugs","Flags_EnemyStatusAttackBug","Flags_FunEnemyNames","Flags_PaletteSwap","Flags_ShuffleLeader"],sliderIds=["Flags_PriceScaleFactor","Flags_EnemyScaleFactor","Flags_ExpMultiplier","Flags_ExpBonus"],base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!%";$(document).ready(function(){setCallbacks();setFlagsString();getPercentageCallback(document.getElementById("Flags_PriceScaleFactor"),"prices-display")();getPercentageCallback(document.getElementById("Flags_EnemyScaleFactor"),"enemy-stats-display")();expGoldBoostCallback();forcedPartyMembersCallback()});